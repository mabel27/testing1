
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
         <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
        
        <script src="https://cdn.auth0.com/js/lock-6.js"></script>

        <script src="//use.typekit.net/iws6ohy.js"></script>
        <script>try{Typekit.load();}catch(e){}</script>

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- font awesome from BootstrapCDN -->
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

        
       
        <script src="auth0-variables.js"> </script>

        <link href="app.css" rel="stylesheet">
        
        
        <script>
        $(document).ready(function() {
    var lock = new Auth0Lock(
      // All these properties are set in auth0-variables.js
      AUTH0_CLIENT_ID,
      AUTH0_DOMAIN
    );

    var userProfile;

    $('.btn-login').click(function(e) {
      e.preventDefault();
      lock.showSignin(function(err, profile, token) {
        if (err) {
          // Error callback
          console.log("There was an error");
          alert("There was an error logging in");
        } else {
          // Success calback

          // Save the JWT token.
          localStorage.setItem('userToken', token);

          // Save the profile
          userProfile = profile;

          $('.login-box').hide();
          $('.logged-in-box').show();
          $('.nickname').text(profile.nickname);
          $('.nickname').text(profile.name);
          $('.avatar').attr('src', profile.picture);
        }
      });
    });

    $.ajaxSetup({
      'beforeSend': function(xhr) {
        if (localStorage.getItem('userToken')) {
          xhr.setRequestHeader('Authorization',
                'Bearer ' + localStorage.getItem('userToken'));
        }
      }
    });

    $('.btn-api').click(function(e) {
      // Just call your API here. The header will be sent
      $.ajax({
        url: 'http://localhost:3001/secured/ping',
        method: 'GET'
      }).then(function(data, textStatus, jqXHR) {
        alert("The request to the secured enpoint was successfull");
      }, function() {
        alert("You need to download the server seed and start it to call this API");
      });
    });


});
        </script>
        
        
        
        
    </head>
    <body class="home">
        <div class="container">
            <div class="login-page clearfix">
              <div class="login-box auth0-box before">
                <img src="https://i.cloudup.com/StzWWrY34s.png" />
                <h3>Auth0 Example</h3>
                <p>Zero friction identity infrastructure, built for developers</p>
                <a ng-click="login()" class="btn btn-primary btn-lg btn-login btn-block">SignIn</a>
              </div>
              <div class="logged-in-box auth0-box logged-in" style="display: none;">
                <h1 id="logo"><img src="auth0_logo_final_blue_RGB.png" /></h1>
                <img class="avatar"/>
                <h2>Welcome <span class="nickname"></span></h2>
                <button class="btn btn-lg btn-primary btn-api">Call API</button>
              </div>
            </div>
        </div>
    </body>
</html>

